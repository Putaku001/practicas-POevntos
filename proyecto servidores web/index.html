<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam - Reseñas de Videojuegos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        emailjs.init('tEl0EncKxgsNZWqU-'); <!-- Aquí coloca tu User ID -->
    </script>
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="logo.png" alt="Logo de Steam">
        </div>
        <nav class="nav">
            <ul>
                <li><a href="#">Tienda</a></li>
                <li><a href="./paginas/biblioteca.html">Biblioteca</a></li>
                <li><a href="#">Comunidad</a></li>
                <li><a href="#">Perfil</a></li>
            </ul>
        </nav>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Buscar en Steam...">
            <button><i class="fas fa-search"></i></button>
        </div>
    </header>

    <main class="main-content">
        <section class="featured-carousel">
            <div class="carousel-item active">
                <img src="juego_destacado.jpg" alt="Juego Destacado">
                <div class="carousel-caption">
                    <h2>Juego Destacado</h2>
                    <p>Descripción del juego destacado con los detalles más interesantes...</p>
                    <button class="btn-primary" onclick="openGameModal('destacado')">Ver Más</button>
                </div>
            </div>
        </section>

        <section class="sort-options">
            <label for="sortSelect">Ordenar por:</label>
            <select id="sortSelect">
                <option value="price">Precio</option>
                <option value="popularity">Popularidad</option>
            </select>
        </section>

        <section class="game-list">
            <h2>Juegos Populares</h2>
            <div class="game-item" data-name="Juego 1" data-price="29.99" data-popularity="5">
                <img src="juego1.jpg" alt="Juego 1">
                <h3>Juego secso</h3>
                <p>Descripción breve del juego 1 con algunos detalles importantes para el jugador...</p>
                <p>Precio: $29.99</p>
                <button class="btn-secondary" onclick="openGameModal('juego1')">Ver Más</button>
            </div>
            <div class="game-item" data-name="Juego 2" data-price="49.99" data-popularity="3">
                <img src="juego2.jpg" alt="Juego 2">
                <h3>Juego 2</h3>
                <p>Descripción breve del juego 2 con algunos detalles importantes para el jugador...</p>
                <p>Precio: $49.99</p>
                <button class="btn-secondary" onclick="openGameModal('juego2')">Ver Más</button>
            </div>
        </section>
    </main>

    <!-- Modales para más información sobre los juegos -->
    <div id="destacadoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeGameModal('destacado')">&times;</span>
            <h2>Juego Destacado - Información</h2>
            <p>Precio: $59.99</p>
            <p>Nota: ★★★★☆</p>
            <h3>Reseñas:</h3>
            <div class="review">
                <h4>Usuario 1</h4>
                <p>¡Increíble juego! Gráficos sorprendentes y jugabilidad impecable.</p>
                <span class="rating">★★★★☆</span>
            </div>
            <div class="review">
                <h4>Usuario 2</h4>
                <p>Buen juego, aunque la historia podría ser mejor.</p>
                <span class="rating">★★★☆☆</span>
            </div>
            <form id="formDestacado" onsubmit="confirmarCompra(event, 'Juego Destacado', 'juego_destacado.jpg', '59.99')">
                <div class="field">
                    <label for="reply_to_destacado">Correo Electrónico:</label>
                    <input type="email" name="reply_to" id="reply_to_destacado" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                </div>
                <input type="submit" id="buttonDestacado" value="Confirmar Compra">
            </form>
        </div>
    </div>

    <div id="juego1Modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeGameModal('juego1')">&times;</span>
            <h2>Juego 1 - Información</h2>
            <p>Precio: $29.99</p>
            <p>Nota: ★★★★☆</p>
            <h3>Reseñas:</h3>
            <div class="review">
                <h4>Usuario 1</h4>
                <p>Este juego es una joya oculta, muy divertido y desafiante.</p>
                <span class="rating">★★★★☆</span>
            </div>
            <div class="review">
                <h4>Usuario 2</h4>
                <p>Me gusta, pero tiene algunos errores que deben corregirse.</p>
                <span class="rating">★★★☆☆</span>
            </div>
            <form id="formJuego1" onsubmit="confirmarCompra(event, 'Juego 1', 'juego1.jpg', '29.99')">
                <div class="field">
                    <label for="reply_to_juego1">Correo Electrónico:</label>
                    <input type="email" name="reply_to" id="reply_to_juego1" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                </div>
                <input type="submit" id="buttonJuego1" value="Confirmar Compra">
            </form>
        </div>
    </div>

    <div id="juego2Modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeGameModal('juego2')">&times;</span>
            <h2>Juego 2 - Información</h2>
            <p>Precio: $49.99</p>
            <p>Nota: ★★★☆☆</p>
            <h3>Reseñas:</h3>
            <div class="review">
                <h4>Usuario 1</h4>
                <p>Los gráficos son impresionantes, pero la historia es un poco floja.</p>
                <span class="rating">★★★☆☆</span>
            </div>
            <div class="review">
                <h4>Usuario 2</h4>
                <p>Divertido para jugar con amigos, pero se vuelve repetitivo.</p>
                <span class="rating">★★★☆☆</span>
            </div>
            <form id="formJuego2" onsubmit="confirmarCompra(event, 'Juego 2', 'juego2.jpg', '49.99')">
                <div class="field">
                    <label for="reply_to_juego2">Correo Electrónico:</label>
                    <input type="email" name="reply_to" id="reply_to_juego2" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                </div>
                <input type="submit" id="buttonJuego2" value="Confirmar Compra">
            </form>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section about">
                <h3>Acerca de SteamClone</h3>
                <p>SteamClone es una réplica inspirada en la plataforma Steam para la demostración de diseño web y funcionalidades interactivas.</p>
            </div>
            <div class="footer-section links">
                <h3>Enlaces Rápidos</h3>
                <ul>
                    <li><a href="#">Tienda</a></li>
                    <li><a href="#">Biblioteca</a></li>
                    <li><a href="#">Comunidad</a></li>
                    <li><a href="#">Perfil</a></li>
                </ul>
            </div>
            <div class="footer-section social">
                <h3>Síguenos</h3>
                <ul>
                    <li><a href="#"><i class="fab fa-facebook-f"></i> Facebook</a></li>
                    <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 SteamClone. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Función para confirmar la compra y enviar el correo
        function confirmarCompra(event, nombre, imagen, precio) {
            event.preventDefault(); // Evita que el formulario se envíe

            const form = event.target;
            const emailInput = form.querySelector('input[name="reply_to"]').value;

            emailjs.send("default_service", "template_ctof49q", {
                reply_to: emailInput,
                to_name: "Usuario",
                message: `Has comprado el juego: ${nombre} por $${precio}`
            }).then(() => {
                // Si el correo se envió correctamente, registrar el juego en la biblioteca
                registrarJuegoEnBiblioteca(nombre, imagen, precio);
                alert('¡Compra confirmada y registrada en tu biblioteca!');
                closeGameModal(form.id.replace('form', '').toLowerCase()); // Cierra el modal correspondiente
            }, (err) => {
                alert('Error al enviar el correo: ' + JSON.stringify(err));
            });
        }

        // Función para registrar el juego en la biblioteca (localStorage)
        function registrarJuegoEnBiblioteca(nombre, imagen, precio) {
            let juegosComprados = JSON.parse(localStorage.getItem('juegosComprados')) || [];
            const juego = {
                nombre: nombre,
                imagen: imagen,
                precio: precio,
                horasJugadas: '0h'
            };
            juegosComprados.push(juego);
            localStorage.setItem('juegosComprados', JSON.stringify(juegosComprados));
        }

        function openGameModal(gameId) {
            const modal = document.getElementById(`${gameId}Modal`);
            modal.style.display = 'block';
        }

        function closeGameModal(gameId) {
            const modal = document.getElementById(`${gameId}Modal`);
            modal.style.display = 'none';
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
